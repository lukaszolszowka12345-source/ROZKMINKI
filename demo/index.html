<!DOCTYPE html>

<html lang="pl">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1,viewport-fit=cover" name="viewport"/>
<title>ROZKMINKI â€” DEMO</title>

<meta content="dark" name="color-scheme"/><link href="https://fonts.googleapis.com" rel="preconnect"/><link crossorigin="anonymous" href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&amp;family=Playfair+Display:wght@600;700;800&amp;display=swap" rel="stylesheet"/><link href="../assets/theme.css" rel="stylesheet"/></head>
<body>
<div class="wrap">
<div class="topbar">
<div>
<div class="brand">ROZKMINKI</div>
<div class="tag">DEMO â€¢ 10 kategorii (po 1 pytaniu)</div>
</div>
<div class="topActions"><button class="btn btnGhost btnInfo" id="howtoBtn" type="button">Instrukcja</button><button class="btn btnGold" id="premiumTop" type="button">PREMIUM</button></div>
</div>
<div class="card" id="screenSetup">
<h1>Demo gry</h1>
<div class="mut">
        Przedsmak peÅ‚nej wersji â€” po jednym pytaniu na kategoriÄ™. W Premium masz peÅ‚nÄ… pulÄ™ pytaÅ„.
      </div>
<div class="grid">
<div>
<label>Liczba graczy (2â€“20)</label>
<div class="row" style="align-items:center; gap:10px">
  <button class="btn btnGhost" id="pMinus" type="button" style="width:52px;padding:12px 0">âˆ’</button>
  <div class="pill" id="pValue" style="min-width:86px;justify-content:center;font-weight:900">2</div>
  <button class="btn btnGhost" id="pPlus" type="button" style="width:52px;padding:12px 0">+</button>
  <input id="playerCount" type="hidden" value="2" />
</div>
<div class="small" style="margin-top:6px">Zakres: 2â€“20</div>

</div>
<div id="playersBox"></div>
<div>
<label>Wybierz kategorie (DEMO)</label>
<div class="row" id="catsBox"></div>
</div>
<div class="row">
<button class="btn btnGhost btnWide" id="startBtn" type="button">Zagraj w DEMO</button>
</div>
<div class="two">
<button class="btn btnGold btnWide" id="premiumBottom1" type="button">Premium â€” peÅ‚na wersja</button>
<button class="btn btnGold btnWide" id="premiumBottom2" type="button">Premium â€” kup dostÄ™p</button>
</div>
<div class="small">
          W DEMO pytania nie powtarzajÄ… siÄ™ w tej grze â€” ale pula jest krÃ³tka.
        </div>
</div>
</div>
<div class="card hide" id="screenGame">
<div class="row rowBetween">
<div class="pill" id="turnPill">Tura</div>
<div class="row">
<button class="btn btnGhost" id="copyBtn" type="button">Kopiuj pytanie</button>
<button class="btn btnGold" id="premiumInGame" type="button">PREMIUM</button>
</div>
</div>
<div style="height:10px"></div>
<div class="pill" id="metaPill">Info</div>
<div style="height:10px"></div>
<div class="bigQ" id="qBox">...</div>
<div style="height:12px"></div>
<div class="two">
<button class="btn btnGhost btnWide" id="nextBtn" type="button">Losuj</button>
<button class="btn btnGhost btnWide" id="skipBtn" type="button">Inne pytanie (2)</button>
</div>
<div style="height:10px"></div>
<div class="small" id="stateInfo"></div>
<div class="small warn" id="warnInfo"></div>
</div>
</div>
<script>
    const PREMIUM_PRODUCT_URL = "https://rozkminki.online/products/rozkminki-premium";

    // DEMO: 10 kategorii, po 1 pytaniu (wybrane z Twojego zestawu)
    const QUESTIONS = {
      "Relacje": [
        "Co w relacji jest dla Ciebie waÅ¼niejsze: spokÃ³j czy prawda â€“ i dlaczego?"
      ],
      "Emocje": [
        "Jaka emocja najczÄ™Å›ciej udaje u Ciebie â€zmÄ™czenieâ€?"
      ],
      "Ja (self)": [
        "GdybyÅ› miaÅ‚/miaÅ‚a opisaÄ‡ siebie jednym zdaniem bez rÃ³l (mÄ…Å¼/Å¼ona, praca), co by to byÅ‚o?"
      ],
      "RozwÃ³j": [
        "Jaka jedna rzecz, robiona codziennie przez 10 minut, zmieniÅ‚aby Twoje Å¼ycie?"
      ],
      "Rodzina": [
        "Co w Twojej rodzinie byÅ‚o tematem tabu i jak to na Ciebie wpÅ‚ynÄ™Å‚o?"
      ],
      "IntymnoÅ›Ä‡ i seks": [
        "Co dla Ciebie oznacza intymnoÅ›Ä‡ poza samym seksem?"
      ],
      "Praca i pieniÄ…dze": [
        "Co oznacza dla Ciebie bezpieczeÅ„stwo finansowe w konkretach (liczby/warunki)?"
      ],
      "Zdrowie i ciaÅ‚o": [
        "Jakie sygnaÅ‚y z ciaÅ‚a ignorujesz najczÄ™Å›ciej?"
      ],
      "Sens i marzenia": [
        "GdybyÅ› miaÅ‚/miaÅ‚a opisaÄ‡ swoje Å¼ycie jako rozdziaÅ‚ ksiÄ…Å¼ki, jaki ma tytuÅ‚ dziÅ›?"
      ],
      "Zabawa i ciekawoÅ›Ä‡": [
        "Jaki byÅ‚ TwÃ³j ostatni moment czystej frajdy â€“ bez celu?"
      ]
    };

    const CAT_ORDER = Object.keys(QUESTIONS);

    const setup = document.getElementById("screenSetup");
    const game = document.getElementById("screenGame");

    const playerCountEl = document.getElementById("playerCount");
    const playersBox = document.getElementById("playersBox");
    const catsBox = document.getElementById("catsBox");
    const startBtn = document.getElementById("startBtn");

    const turnPill = document.getElementById("turnPill");
    const metaPill = document.getElementById("metaPill");
    const qBox = document.getElementById("qBox");
    const nextBtn = document.getElementById("nextBtn");
    const skipBtn = document.getElementById("skipBtn");
    const copyBtn = document.getElementById("copyBtn");
    const stateInfo = document.getElementById("stateInfo");
    const warnInfo = document.getElementById("warnInfo");

    // Premium buttons -> product page
    [
      document.getElementById("premiumTop"),
      document.getElementById("premiumBottom1"),
      document.getElementById("premiumBottom2"),
      document.getElementById("premiumInGame"),
    ].forEach(b => b.addEventListener("click", () => window.location.assign(PREMIUM_PRODUCT_URL)));

    let players = [];
    let enabledCats = new Set();
    let deck = [];
    let used = new Set();
    let askerIdx = 0;
    let answererIdx = 1;
    let currentQ = null;
    let skipsLeft = {};

    function clamp(n, a, b){ return Math.max(a, Math.min(b, n)); }

    function renderPlayers(){
      const n = clamp(parseInt(playerCountEl.value || "2",10), 2, 20);
      playerCountEl.value = n;

      playersBox.innerHTML = "";
      for(let i=0;i<n;i++){
        const inp = document.createElement("input");
        inp.placeholder = `ImiÄ™ gracza ${i+1}`;
        inp.id = `p_${i}`;
        inp.autocomplete = "off";
        inp.style.marginTop = "8px";
        playersBox.appendChild(inp);
      }
    }

    function renderCats(){
      catsBox.innerHTML = "";
      enabledCats = new Set();

      CAT_ORDER.forEach(cat=>{
        const wrap = document.createElement("label");
        wrap.className = "pill";
        wrap.style.cursor = "pointer";

        const cb = document.createElement("input");
        cb.type = "checkbox";
        cb.checked = true;
        cb.style.width = "auto";
        cb.style.margin = "0";
        cb.addEventListener("change", ()=>{
          if(cb.checked) enabledCats.add(cat);
          else enabledCats.delete(cat);
        });

        enabledCats.add(cat);

        const span = document.createElement("span");
        span.textContent = cat;

        wrap.appendChild(cb);
        wrap.appendChild(span);
        catsBox.appendChild(wrap);
      });
    }

    function buildDeck(){
      deck = [];
      enabledCats.forEach(cat=>{
        (QUESTIONS[cat] || []).forEach((q, idx)=>{
          deck.push({cat, q, key:`${cat}::${idx}`});
        });
      });

      // shuffle
      for(let i=deck.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [deck[i], deck[j]] = [deck[j], deck[i]];
      }
    }

    function pickNextQuestion(){
      warnInfo.textContent = "";
      while(deck.length){
        const item = deck.pop();
        if(!used.has(item.key)){
          used.add(item.key);
          return item;
        }
      }
      return null;
    }

    function setTurnPills(){
      const asker = players[askerIdx] || `Gracz ${askerIdx+1}`;
      const ans = players[answererIdx] || `Gracz ${answererIdx+1}`;
      turnPill.textContent = `${asker} â†’ pyta`;
      metaPill.textContent = `${ans} â†’ odpowiada â€¢ pominiÄ™cia: ${skipsLeft[ans] ?? 0}`;
    }

    function showQuestion(item){
      setTurnPills();
      qBox.textContent = item.q;
      stateInfo.textContent = `Kategoria: ${item.cat} â€¢ PozostaÅ‚o pytaÅ„ w DEMO: ${deck.length}`;
      const ans = players[answererIdx];
      const left = skipsLeft[ans] ?? 0;
      skipBtn.textContent = `Inne pytanie (${left})`;
      skipBtn.disabled = left <= 0;
    }

    function startGame(){
      const n = clamp(parseInt(playerCountEl.value||"2",10),2,20);
      players = [];
      for(let i=0;i<n;i++){
        const v = (document.getElementById(`p_${i}`)?.value || "").trim();
        players.push(v || `Gracz ${i+1}`);
      }

      if(enabledCats.size === 0){
        alert("Wybierz przynajmniej jednÄ… kategoriÄ™.");
        return;
      }

      // demo: 2 pominiÄ™cia na gracza
      skipsLeft = {};
      players.forEach(p => skipsLeft[p] = 2);

      used = new Set();
      buildDeck();

      askerIdx = 0;
      answererIdx = (players.length>1 ? 1 : 0);

      currentQ = pickNextQuestion();
      if(!currentQ){
        alert("Brak pytaÅ„ w wybranych kategoriach (DEMO).");
        return;
      }

      setup.classList.add("hide");
      game.classList.remove("hide");
      showQuestion(currentQ);
    }

    function nextTurn(){
      askerIdx = (askerIdx + 1) % players.length;
      answererIdx = (askerIdx + 1) % players.length;

      const item = pickNextQuestion();
      if(!item){
        qBox.textContent = "Koniec DEMO ğŸ™‚ Kliknij PREMIUM, aby przejÅ›Ä‡ do zakupu peÅ‚nej wersji.";
        stateInfo.textContent = "";
        skipBtn.disabled = true;
        nextBtn.disabled = true;
        warnInfo.innerHTML = `Kliknij <b>PREMIUM</b>, aby przejÅ›Ä‡ do zakupu.`;
        return;
      }
      currentQ = item;
      showQuestion(item);
    }

    function skipQuestion(){
      const ans = players[answererIdx];
      if((skipsLeft[ans] ?? 0) <= 0){
        warnInfo.textContent = "Nie masz juÅ¼ pominiÄ™Ä‡ w tej grze.";
        return;
      }
      skipsLeft[ans] -= 1;

      const item = pickNextQuestion();
      if(!item){
        qBox.textContent = "Koniec DEMO ğŸ™‚";
        nextBtn.disabled = true;
        skipBtn.disabled = true;
        return;
      }
      currentQ = item;
      showQuestion(item);
    }

    function copyCurrent(){
      const asker = players[askerIdx];
      const ans = players[answererIdx];
      const txt = `ROZKMINKI (DEMO)\n${asker} pyta â†’ ${ans} odpowiada\n[${currentQ?.cat || ""}] ${currentQ?.q || ""}`;
      navigator.clipboard?.writeText(txt).then(()=>{
        warnInfo.textContent = "Skopiowano âœ…";
        setTimeout(()=>warnInfo.textContent="", 900);
      }).catch(()=>{
        warnInfo.textContent = "Nie udaÅ‚o siÄ™ skopiowaÄ‡ (blokada przeglÄ…darki).";
      });
    }

    // init
    renderPlayers();
    renderCats();

    playerCountEl.addEventListener("input", renderPlayers);
    startBtn.addEventListener("click", startGame);
    nextBtn.addEventListener("click", nextTurn);
    skipBtn.addEventListener("click", skipQuestion);
    copyBtn.addEventListener("click", copyCurrent);
  </script>
<div class="modal" id="howtoModal" aria-hidden="true" role="dialog" aria-label="Instrukcja gry">
  <div class="modalBackdrop" data-close="1"></div>
  <div class="modalCard" role="document">
    <div class="modalHead">
      <div class="modalTitle">Instrukcja gry</div>
      <button class="btn btnGhost" type="button" id="howtoClose" aria-label="Zamknij">PowrÃ³t</button>
    </div>
    <div class="modalBody">
      <p><strong>Rozkminki</strong> to gra rozmÃ³w, ktÃ³ra pomaga lepiej poznaÄ‡ siebie i innych â€” przez pytania, ktÃ³re otwierajÄ…, poruszajÄ… i zbliÅ¼ajÄ….</p>
      <p>W trakcie gry mogÄ… pojawiÄ‡ siÄ™ silniejsze emocje (wzruszenie, smutek, Å›miech, zaskoczenie). Dajcie sobie przestrzeÅ„: zatrzymajcie grÄ™, dopytajcie, porozmawiajcie â€” a gdy trzeba, zrÃ³bcie przerwÄ™ i wrÃ³Ä‡cie pÃ³Åºniej.</p>

      <h3>Jak graÄ‡</h3>
      <ol class="modalList">
        <li>Ustalcie liczbÄ™ graczy (od <strong>2 do 20</strong>) i wpiszcie imiona.</li>
        <li>Wybierzcie kategorie, ktÃ³re majÄ… braÄ‡ udziaÅ‚ w rozgrywce (moÅ¼ecie pominÄ…Ä‡ te, na ktÃ³re nie macie dziÅ› przestrzeni).</li>
        <li>Osoba rozpoczynajÄ…ca klika <strong>Losuj</strong>, czyta pytanie i kieruje je do kolejnej osoby.</li>
        <li>Po odpowiedzi <strong>osoba odpowiadajÄ…ca</strong> losuje pytanie dla nastÄ™pnej osoby â€” i tak dalej, w kÃ³Å‚ko.</li>
      </ol>

      <h3>Dobre zasady rozmowy</h3>
      <ul class="modalList">
        <li>JeÅ›li odpowiedÅº odbiega od pytania â€” delikatnie nakierujcie z powrotem na temat.</li>
        <li>JeÅ›li odpowiedÅº jest zbyt krÃ³tka â€” poproÅ›cie o rozwiniÄ™cie (â€Opowiesz wiÄ™cej?â€ â€Co masz na myÅ›li?â€).</li>
        <li>Nie oceniajcie. SÅ‚uchajcie. Wspierajcie. To gra o ciekawoÅ›ci, nie o racji.</li>
      </ul>

      <h3>Zmiana pytania i koniec gry</h3>
      <ul class="modalList">
        <li>KaÅ¼dy gracz ma ograniczonÄ… liczbÄ™ <strong>zmian pytania</strong> w trakcie jednej gry (licznik widzisz przy przycisku).</li>
        <li>Gdy klikniesz <strong>Inne pytanie</strong>, aktualne pytanie wraca do puli â€” moÅ¼e je jeszcze wylosowaÄ‡ ktoÅ› inny.</li>
        <li>Gra moÅ¼e zakoÅ„czyÄ‡ siÄ™ w dowolnym momencie albo po wyczerpaniu pytaÅ„ w wybranych kategoriach.</li>
      </ul>

      <div class="modalHint">WskazÃ³wka: najlepsze â€Rozkminkiâ€ dziejÄ… siÄ™ wtedy, gdy odpowiadamy szczerze i pozwalamy sobie na chwilÄ™ ciszy.</div>
    </div>
  </div>
</div>
</body>
<script>
(function(){
  const btn = document.getElementById('howtoBtn');
  const modal = document.getElementById('howtoModal');
  const closeBtn = document.getElementById('howtoClose');
  if(!btn || !modal || !closeBtn) return;

  function openModal(){
    modal.classList.add('isOpen');
    modal.setAttribute('aria-hidden','false');
    document.body.style.overflow='hidden';
  }
  function closeModal(){
    modal.classList.remove('isOpen');
    modal.setAttribute('aria-hidden','true');
    document.body.style.overflow='';
  }

  btn.addEventListener('click', openModal);
  closeBtn.addEventListener('click', closeModal);
  modal.addEventListener('click', (e)=>{
    if(e.target && e.target.dataset && e.target.dataset.close) closeModal();
  });
  window.addEventListener('keydown', (e)=>{
    if(e.key === 'Escape' && modal.classList.contains('isOpen')) closeModal();
  });
})();
</script>
</html>
